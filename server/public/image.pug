include partials/google_analytics.pug
include partials/mailchimp.pug

doctype html
html
    head
        +google-analytics-mixin()
        title Ganbreeder
        meta(charset="utf-8")
        meta(content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport")

        meta(property="og:title", content="Image from Ganbreeder")
        meta(property="og:description", content="An image generated by Ganbreeder.")
        meta(property="og:image", content=src=root+key+'.jpeg')
        meta(property="og:image:width", content="128")
        meta(property="og:image:height", content="128")
        meta(property="og:image:type", content="image/jpeg")
        meta(property="og:url", content='https://ganbreeder.app/i?k='+key)

        meta(name="twitter:card", content="summary")
        meta(name="twitter:creator", content="@_joelsimon")
        meta(name="twitter:text:title", content="Ganbreeder Image")
        meta(name="twitter:image", content=root+key+'.jpeg')
        meta(name="Description", content="A collaborative tool for discovering images.")

        link(href="index.css" rel="stylesheet" media="screen")

        style.
            #star {
            }
            #star img {
                height: 25px;
                cursor: pointer;
            }
            .text_container.class_labels {
                max-width: 800px;
                text-align: left;
            }
            .text_container.class_labels p {
                display: inline;
                margin-right: 15px;
            }
    body

        header
            .container.center
                a.title(href='/')
                    h1 Ganbreeder
        section
            .container.top
                #links
                    if pkey
                        .awrap
                            a(href='/lineage?k='+key) Lineage
                    .awrap
                        a(href='/mix?parent1='+key) Mix
                    .awrap#star
                        img
                    .awrap
                        a(href='/starred') Starred
                    .awrap
                        a(href='http://www.ganvas.studio/?k='+key, target="_blank") Print

                img.image(src=root+key+'.jpeg')

            .image_container#loading_container
                img.loading(src="image/loading.gif", style='width:50%;')
                p Loading Children

            .image_container.content(style='display:hidden')
                - for (i = 0; i < 12; i ++) {
                    a.imglink()
                        img()
                - }
            .text_container.class_labels
                - for (i = 0; i < 1000; i ++) {
                    - if (label[i] > 0.01)
                        p!=label_names[i]+": "+(label[i]*100).toFixed(2)+'%'
                - }
            .text_container.center(style='text-align:center;font-size:1.0em;')
                p Share this image via its URL
                a(href='/info?k='+key) Image Data


        #footer
        script.
            const key = "#{key}";
            const root = "#{root}";

        script(src="utils.js")
        script(src="image.js")
